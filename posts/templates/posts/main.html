{% extends 'posts/base.html' %} {% block content %}
<div class="content">
  <div id="main__main_div">
    <form method="GET">
      <div id="main__search_div">
        <div id="main__search_div__top">
          <div id="search_div__top_left">
            <div id="search_div__top_left__nav">
              <span><a href="{% url 'posts:home' 'all' %}">ì „ì²´</a></span>
              <span><a href="{% url 'posts:home' 'offline' %}">ì˜¤í”„ë¼ì¸</a></span>
              <span><a href="{% url 'posts:home' 'online' %}">ì˜¨ë¼ì¸</a></span>
              <span><a href="{% url 'posts:home' 'mix' %}">í˜¼í•©</a></span>
            </div>
            <div id="search_div__top_left__search">
              {% if search %}
              <input
                id="main__search_text"
                type="text"
                name="search"
                placeholder="ê´€ì‹¬ ëª¨ê°ì½”ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”"
                value="{{ search }}"
              />
              <button type="submit"">ê²€ìƒ‰</button>
              {% else %}
              <input type="text" name="search" class="main__search_text" placeholder="ê´€ì‹¬ ëª¨ê°ì½”ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
              <button type="submit"">ê²€ìƒ‰</button>
              {% endif %}
              <input
                id="main__search_tag"
                type="text"
                placeholder="íƒœê·¸ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”"
              />
            </div>
          </div>
          <div id="search_div__top_right">
            <div id="search_div__top_right__switch">
              <div class="search_div__top_right__switch_txt">
                <p>ëª¨ì§‘ì¤‘ë§Œ ë³´ê¸°</p>
              </div>
              <div class="wrapper">
                <input type="checkbox" id="switch" />
                <label for="switch" class="switch_label">
                  <span class="onf_btn"></span>
                </label>
              </div>
            </div>
            <div id="search_div__top_right__btn">
              <button id="main__search_btn" type="submit">ê²€ìƒ‰</button>
            </div>
            <div id="search_div__top_right__reset">
              <div class="post_main__tag__reset">
                <i class="fa-solid fa-arrows-rotate" style="color: black;"></i>
                <input type="submit" name="reset" class="post-main__tag__reset" value="ì´ˆê¸°í™”">
              </div>
            </div>
          </div>
        </div>
        <div id="main__search_div__tag">
          <ul class="main__search_li__tag_flex">
          </ul>
        </div>
        <div id="main__info_div__top">
          <!--ì½”ë“œë¦¬ë·° ë°›ê³  ì±„ì€ì´í•˜ê³  ìˆ˜ì •í•˜ê¸°
          <div id="main__info_div__nav">
            <span>ìµœì‹ ìˆœ</span>
            <span>ì¡°íšŒìˆœ</span>
            <span>ëŒ“ê¸€ìˆœ</span>
            <span>ì¢‹ì•„ìš”ìˆœ</span>
          </div>
          -->
          
          <select name="sort" onchange="this.form.submit();">
            <option value="default">--ì •ë ¬ê¸°ì¤€--</option>
            <option value="latest" {% if sort == "latest" %}selected{% endif %}>ìµœì‹ ìˆœ</option>
            <option value="views" {% if sort == "views" %}selected{% endif %}>ì¡°íšŒìˆœ</option>
            <option value="">ëŒ“ê¸€ìˆœ</option>
            <option value="">ì¢‹ì•„ìš”ìˆœ</option>
          </select>
          <div id="main__info_div__box">
            <!--<select name="language" class="selectbox">
              <option value="ì „ì²´" class="lang-option">ì „ì²´</option>
              <option value="ì •ê¸°" class="lang-option">ğŸ“… ì •ê¸°</option>
              <option value="ë²ˆê°œ" class="lang-option">âš¡ï¸ ë²ˆê°œ</option>
            </select>-->
            <!--ì´ ë¶€ë¶„ class ëª… ê³ ì¹˜ê¸°-->
            <div class="dropdown">
              <div class="select">
                <span class="selected">ì „ì²´</span>
                <div class="caret"></div>
              </div>
              <ul class="menu">
                <li class="active">ì „ì²´</li>
                <li>ğŸ“… ì •ê¸°</li>
                <li>âš¡ï¸ ë²ˆê°œ</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </form>
    <div id="main__info_div">
      {% for post in posts %}
      <div id="main__info_div__post" onclick="location.href='{% url 'posts:detail' post.id %}';">
        <!--ì´ ë¶€ë¶„ ë°”ë¡œê°€ê¸° ìˆ˜ì •í•˜ê¸°(ê·¸ëƒ¥ ì „ì²´ ì¹¸ ëˆ„ë¥´ë©´ ì´ë™í•˜ë„ë¡)-->
        <!--ìˆ˜ì •ì€ í–ˆëŠ”ë° ë§í¬ ë¶€ë¶„ì— ë¹¨ê°„ ì¤„ í•´ê²°í•˜ê¸°-->
        <div id="main__info_div__post_left">
          <div id="main__info_div__post_left__tag">
            <ul class="main__info_li__tag_flex">
              <li>ëª¨ì§‘ì¤‘</li>
              {% for key, value in tags.items %}
              {% if key == post.id %}
              {% for v in value %}
              <li>{{v}}</li>
              {% endfor %}
              {% endif %}
              {% endfor %}
            </ul>
          </div>
          <div id="main__info_div__post_left__title">
            {{post.title}}
          </div>
          <div id="main__info_div__post_left__reaction">
            <i class="fa-solid fa-eye"></i>
            <span>{{post.views}}</span>
            <i class="fa-solid fa-comment-dots"></i>
            <span>{{post.comment_set.all|length}}</span>
            <!--ì—­ì°¸ì¡°-->
            <i class="fa-solid fa-heart"></i>
            <span>{{post.likes}}</span>
          </div>
        </div>
        <div id="main__info_div__post_right">
          <div id="main__info_div__post_right__img">
            <i class="fa-solid fa-circle-user fa-2x"></i>
          </div>
          <div id="main__info_div__post_right__info">
            <div id="main__info_div__post_right__info_name">
              <span>ê¹€í”¼ë¡œ</span>
            </div>
            <div id="main__info_div__post_right__info_time">
              <span>{{post.published_at|date:"Y-m-d"}}</span>
              <!--ë“±ë¡ ì¼ì í˜•ì‹ ìˆ˜ì •í•˜ê¸°-->
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <script src="/static/js/post_main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const onlyActive = document.querySelector('input[id=switch]');
    onlyActive.addEventListener('click', () => {
      if (onlyActive.checked) {
        console.log("true")
      } else{
        console.log("false")
      }
    })

  </script>
</div>
{% endblock content %}
