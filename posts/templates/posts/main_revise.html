{% extends 'posts/base.html' %} {% block content %}
<div class="content">
  <form
    action="{% url 'posts:update' post.id %}"
    method="post"
    enctype="multipart/form-data"
  >
    {% csrf_token %}
    <div id="main_write__top">
      <div class="main_write__title">
        <div class="main_write__title_num"><h2>1</h2></div>
        <h1>ëª¨ì§‘ ìš”ê±´ì„ ì‘ì„±í•´ì£¼ì„¸ìš”</h1>
      </div>
      <div id="main_write__top__select">
        <div class="main_write__top__select_row">
          <div class="main_write__dropdown__select_left">
            <!--<div class="main_write__top__select_title">
            <h3>ì§„í–‰ë°©ì‹</h3>
          </div>
          <div class="main_write__top__box">
            <div class="main_write__dropdown">
              <div class="main_write__select">
                <div
                  class="main_write__selected"
                  contenteditable="true"
                  placeholder="ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸/í˜¼í•©"
                ></div>
                <div class="main_write__caret"></div>
              </div>
              <div class="main_write__menu">
                <li class="main_write__active">ì˜¨ë¼ì¸</li>
                <li>ì˜¤í”„ë¼ì¸</li>
                <li>í˜¼í•©</li>
              </div>
            </div>
          </div>-->
            <!--ë“œë¡­ë‹¤ìš´ ì•„ì§ ì—°ê²° ì•ˆë¼ì„œ ì¼ë‹¨ select boxë¡œ-->
            <div id="main_write__select_contact">
              <label for="{{form.contact.id_for_label}}">ì§„í–‰ ë°©ì‹</label>
              <select name="contact">
                <option value="default">----------</option>
                {% for key, value in contacts %}
                <option value="{{ key }}" {% if post.contact == key %}selected{%endif%}>{{ value }}</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <!--ë“œë¡­ë‹¤ìš´ ì•„ì§ ì—°ê²° ì•ˆë¼ì„œ ì¼ë‹¨ select boxë¡œ-->
          <!--<div class="main_write__top__select_title">
            <h3>ëª¨ì„í˜•íƒœ</h3>
          </div>
          <div class="main_write__top__box">
            <div class="main_write__dropdown">
              <div class="main_write__select">
                <div
                  class="main_write__selected"
                  contenteditable="true"
                  placeholder="ì •ê¸°/ë²ˆê°œ"
                ></div>
                <div class="main_write__caret"></div>
              </div>
              <ul class="main_write__menu">
                <li class="main_write__active">ì •ê¸°</li>
                <li>ë²ˆê°œ</li>
              </ul>
            </div>
          </div>-->
          <!--ë“œë¡­ë‹¤ìš´ ì•„ì§ ì—°ê²° ì•ˆë¼ì„œ ì¼ë‹¨ select boxë¡œ-->
          <div class="main_write__dropdown__select_right">
            <div id="main_write__select_duration">
              <label for="{{form.duration.id_for_label}}">ëª¨ì„ í˜•íƒœ</label>
              <select name="duration">
                <option value="default">----------</option>
                {% for key, value in durations %}
                <option value="{{ key }}" {% if post.duration == key %}selected{%endif%}>{{ value }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <!--ë“œë¡­ë‹¤ìš´ ì•„ì§ ì—°ê²° ì•ˆë¼ì„œ ì¼ë‹¨ select boxë¡œ-->
        </div>
        <div class="main_write__top__select_row">
          <div class="main_write__top__select_left">
            <div id="main_write__top__box_text_number">
              <div for="{{ form.number.id_for_label }}">ëª¨ì§‘ ì¸ì›</div>
              {{form.number}}
            </div>
          </div>
          <div class="main_write__top__select_right">
            <div id="main_write__top__box_text_location">
              <div for="{{ form.location.id_for_label }}">ì§€ì—­</div>
              {{form.location}}
            </div>
          </div>
        </div>
        <div class="main_write__top__select_row">
          <div class="main_write__top__select_left">
            <div id="main_write__top__box_text_link">
              <div for="{{ form.apply_link.id_for_label }}">ëª¨ì§‘ ë§í¬</div>
              {{form.apply_link}}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="main_write__tag">
      <div class="main_write__title">
        <div class="main_write__title_num"><h2>2</h2></div>
        <h1>íƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</h1>
      </div>
      <div class="main_write__tag_write__main">
        <div class="main_write__tag_write__main_title"><h3>íƒœê·¸</h3></div>
        <div id="main_write__tag_write__main_content">
          <input
            type="text"
            class="main_write__tag__main_content_input"
            placeholder="íƒœê·¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"
            name="tag"
          />
        </div>
        <div class="main__search_div__tag">
          <ul class="main__search_li__tag_flex">
            {% for otag in origin_tag %}
            <li>{{otag}}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
    <div id="main_write__content">
      <div class="main_write__title">
        <div class="main_write__title_num"><h2>3</h2></div>
        <h1>ê¸€ ì œëª©ê³¼ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”</h1>
      </div>
      <div class="main_write__tag_write__main">
        <div id="main_write__title_write__main_content_input">
          <div for="{{ form.title.id_for_label }}">ì œëª©</div>
          {{ form.title }}
        </div>
        <div id="main_write__content__contents">
          <div id="main_write__content__write_txt">
            <div for="{{form.content.id_for_label }}">ë‚´ìš©</div>
            {{ form.content }}
          </div>
        </div>
      </div>
      <div id="main_write__content__btn">
        <div id="main_write__content__btn_cancel">
          <a onclick="">ì·¨ì†Œ</a>
        </div>
        <div id="main_write__register_modal_btn">
          <a>ë“±ë¡í•˜ê¸°</a>
        </div>
        <!--ì—¬ê¸° í¬ìŠ¤íŠ¸ê°€ ì˜ ë§Œë“¤ì–´ì¡Œë‹¤ëŠ” ê±¸ ifë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•˜ë ¤ë©´ ë­˜ ë„£ì–´ì•¼ í• ê¹Œ-->
      </div>
    </div>
    <div id="post_write__modal">
			<div class="post_write__modal__overlay">
				<div class="post_write__modal__content">
					<div class="post_write__modal__close_btn">
						<i class="fa-solid fa-xmark fa-lg"></i>
					</div>
					<h1>ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h1>
					<h3>ì „ì› ëª¨ì§‘ ì™„ë£Œë˜ë©´ ëª¨ì§‘ì™„ë£Œë¡œ ì „í™˜í•˜ì‹œëŠ”ê±° ìŠì§€ ë§ì•„ì£¼ì„¸ìš”ğŸ¥¹</h3>
					<i class="fa-solid fa-circle-check fa-3x"></i>
					<button class="post_write__register__complete_btn" type="submit">ìˆ˜ì •í•˜ê¸°</button>
				</div>
			</div>
		</div>
  </form>
  <script src="/static/js/post_main_write.js"></script>
  <script>
    let inputElm = document.querySelector("input[name=tag]");

    // initialize Tagify
    var tagify = new Tagify(inputElm);

    // tagify ì „ìš© ì´ë²¤íŠ¸ ë¦¬ìŠ¤í„°. ì°¸ì¡° : https://github.com/yairEO/tagify#events
    tagify
      .on("add", onAddTag) // íƒœê·¸ê°€ ì¶”ê°€ë˜ë©´
      .on("remove", onRemoveTag) // íƒœê·¸ê°€ ì œê±°ë˜ë©´
      .on("input", onInput) // íƒœê·¸ê°€ ì…ë ¥ë˜ê³  ìˆì„ ê²½ìš°
      .on("invalid", onInvalidTag) // í—ˆìš©ë˜ì§€ ì•ŠëŠ” íƒœê·¸ì¼ ê²½ìš°
      .on("click", onTagClick) // í•´ì‹œ íƒœê·¸ ë¸”ëŸ­ì„ í´ë¦­í•  ê²½ìš°
      .on("focus", onTagifyFocusBlur) // í¬ì»¤ìŠ¤ ë  ê²½ìš°
      .on("blur", onTagifyFocusBlur) // ë°˜ëŒ€ë¡œ í¬ì»¤ìŠ¤ë¥¼ ìƒì„ ê²½ìš°

      .on("edit:start", onTagEdit) // ì…ë ¥ëœ íƒœê·¸ ìˆ˜ì •ì„ í•  ê²½ìš°

      .on("dropdown:hide dropdown:show", (e) => console.log(e.type)) // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ê°€ ì‚¬ë¼ì§ˆê²½ìš°
      .on("dropdown:select", onDropdownSelect); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ì—ì„œ ì•„ì´í…œì„ ì„ íƒí•  ê²½ìš°

    // tagify ì „ìš© ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° í• ë–„
    tagify.off("add", onAddTag);

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì½œë°± ë©”ì†Œë“œ
    function onAddTag(e) {
      console.log("onAddTag: ", e.detail);
      console.log("original input value: ", inputElm.value);
    }

    // tag remvoed callback
    function onRemoveTag(e) {
      console.log(
        "onRemoveTag:",
        e.detail,
        "tagify instance value:",
        tagify.value
      );
    }

    function onTagEdit(e) {
      console.log("onTagEdit: ", e.detail);
    }

    // invalid tag added callback
    function onInvalidTag(e) {
      console.log("onInvalidTag: ", e.detail);
    }

    // invalid tag added callback
    function onTagClick(e) {
      console.log(e.detail);
      console.log("onTagClick: ", e.detail);
    }

    function onTagifyFocusBlur(e) {
      console.log(e.type, "event fired");
    }

    function onDropdownSelect(e) {
      console.log("onDropdownSelect: ", e.detail);
    }

    function onInput(e) {
      console.log("onInput: ", e.detail);

      tagify.loading(true); // íƒœê·¸ ì…ë ¥í•˜ëŠ”ë° ìš°ì¸¡ì— loader ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
      tagify.loading(false); // loader ì• ë‹ˆë©”ì´ì…˜ ì œê±°

      tagify.dropdown.show(e.detail.value); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë³´ì—¬ì£¼ê¸°
      tagify.dropdown.hide(); // // ë“œë¡­ë‹¤ìš´ ì œê±°
    }
  </script>
</div>
{% endblock %}
