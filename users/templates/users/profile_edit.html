{% extends 'users/account_base.html' %} {% block content %}

<main>
  <div id="profile-edit__container">
    <span class="profile-edit__title">프로필 수정</span>
    <form method="post" action="{% url 'users:profile_edit' id %}">
      {% csrf_token %}
        <div class="input__edit__name">
            {{ form.name.errors }}
            <lable for="{{ form.name.id_for_label }}"><p>이름</p></lable>
            <input
            type="text"
            name="name"
            value="{{user.name}}"
            maxlength="10"
            required=""
            id="id_name"
            placeholder="이름을 입력하세요."
            />
        </div>
        <div class="input__edit__nickname">
            {{ form.nickname.errors }}
            <lable for="{{ form.nickname.id_for_label }}"><p>닉네임</p></lable>
            <input
            type="text"
            name="nickname"
            value="{{user.nickname}}"
            maxlength="20"
            required=""
            id="id_nickname"
            placeholder="새 닉네임을 입력하세요."
            />
        </div>
        <div class="input__edit__profile_img">
            {{ form.profile_img.errors }}
            <lable for="{{ form.profile_img.id_for_label }}"
            ><p>
                프로필 사진&nbsp;<span style="color: #8c8c8c; font-size: 1rem; font-weight: 100;">(선택)</span><br /><p style="color: #8c8c8c; font-size: 0.5rem"
                >*업로드 안할 시, MOCO에서 제공하는 기본 프로필 사진으로
                적용됩니다.</p>
            </p></lable
            >
            <input
            type="file"
            name="profile_img"
            accept="image/*"
            id="id_profile_img"
            />
            <label class="input__img__container" for="id_profile_img"></label>
        </div>
        <div class="input__edit__gender">
            {{ form.gender.errors }}
            <lable for="{{ form.gender.id_for_label }}"><p>성별</p></lable>
            {{form.gender}}
        </div>
        <div class="input__edit__job">
            {{ form.job.errors }}
            <lable for="{{ form.job.id_for_label }}"><p>직업</p></lable>
            {{form.job}}
        </div>
        <div>
            {{ form.birth.errors }}
            <lable for="{{ form.birth.id_for_label }}"><p>생년월일</p></lable>
            <input class="input__edit__birthday" type="text" name="birth" value="{{user.birth}}" required="" id="id_birth" placeholder="YYYY-MM-DD 형식으로 적어주세요.">
        </div>
        <div>
            {{ form.desc.errors }}
            <lable for="{{ form.desc.id_for_label }}"><p>자기소개&nbsp;<span style="color: #8c8c8c">(선택)</span></p></lable>
            <textarea class="input__edit__desc" name="desc" cols="40" rows="10" maxlength="100" value="{{user.desc}}" id="id_desc" placeholder="100자 이내로 입력해주세요."></textarea>
        </div>
        <div class="input__edit__email">
            {{ form.email.errors }}
            <lable for="{{ form.email.id_for_label }}"><p>이메일</p></lable>
            <input type="email" name="email" value="{{user.email}}" maxlength="254" required="" id="id_email" placeholder="이메일 형식에 맞추어 적어주세요.">
        </div>
        <div>
            <p>비밀번호 변경</p>
            <button class="change-pw__btn" onclick="changePw()"><span>바로가기</span></button>
        </div>
        <div>
            <p>회원탈퇴</p>
            <button id="signout__btn"><span style="color: red;">회원탈퇴</span></button>
        </div>
        <!--회원탈퇴 모달-->
        <div id="signout__modal" class="modal-overlay" style="display: none;">
            <div class="modal__window">
                <div class="modal-close">x</div>
                <div class="modal__content">
                    <p style="margin-top:3rem; font-size: 1.3rem; font-weight: 900">MOCO에서 탈퇴하시겠어요?</p>
                    <p style="font-size: 1rem; font-weight: 300">
                    ⚠️회원 탈퇴시, 계정과 관련된 모든 정보가 삭제되며 복구할 수 없습니다⚠️ 
                    </p>
                    <div id="signout__modal__btns">
                        <a href=""
                        ><button id="signout-cc__btn">
                            아니요
                        </button></a
                        >
                        <a href=""
                        ><button id="signout-cf__btn">
                            탈퇴하기
                        </button></a
                        >
                    </div>  
                </div>
              </div>
        </div>
        <!--회원탈퇴 모달-->
        <div id="edit__btn__container">
            <button class="edit-cancel__btn">취소</button>
            <button class="edit-cf__btn" type="submit">수정 완료</button>
        </div>
      <!--{{form.as_p}}
      <button type="submit">제출</button>-->
    </form>
  </div>
</main>
<script>
    function changePw() {
        location.href="{% url 'users:change_pw' %}"
    }

    const modal = document.getElementById("signout__modal")
    const btnModal = document.getElementById("signout__btn")
    btnModal.addEventListener("click", e => {
        modal.style.display = "flex"
    })

    const closeBtn = modal.querySelector(".modal-close")
    closeBtn.addEventListener("click", e => {
        modal.style.display = "none"
    })

    modal.addEventListener("click", e => {
        const evTarget = e.target
        if(evTarget.classList.contains("modal-overlay")) {
            modal.style.display = "none"
        }
    })
</script>
{% endblock %}