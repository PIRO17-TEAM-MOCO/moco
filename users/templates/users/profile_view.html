{% extends 'users/base.html' %} {% block content %}
{% load static %}
<div class="content">
  <div class="profile-top">
    <div class="profile-top__top">
      <div class="profile-top__left">
        {% if user.profile_img %}
        <img src="{{user.profile_img.url}}" alt="profile_img"></img>
        {% else %}
        <img src="{% static "img/moco_symbol.png" %}" alt="profile_img"></img>
        {% endif %}
      </div>
      <div class="profile-top__right">
        <div class="profile-top__edit">
          <div>
            <h1>{{user.nickname}}</h1>
          </div>
          <div>
            {% if edit_access %}
            <a href="{% url 'users:profile_edit' user.id %}">í”„ë¡œí•„ìˆ˜ì •</a>
            {% endif %}
          </div>
        </div>
        <div class="profile-top__level"><p>Lv.7(ì„ì‹œ)</p></div>
      </div>
    </div>
    <div class="profile-top__bottom">
      <div class="profile-top__info">
        <h2>ê¸°ë³¸ì •ë³´</h2>
        <div class="profile-top__info__list">
          <div><span>ë‚˜ì´</span><span>{{age}}</span></div>
          <div><span>ì§ì—…</span><span>{{user.get_job_display}}</span></div>
          <div><span>ì„±ë³„</span><span>{{user.get_gender_display}}</span></div>
        </div>
      </div>
      <div class="profile-top__desc">
        <h2>ì†Œê°œ</h2>
        <p>{{user.desc}}</p>
      </div>
    </div>
  </div>

  <div class="profile-bottom">
    {% if edit_access %}
    <div class="profile-bottom__list">
      <h2>â¤ï¸ ì¢‹ì•„ìš”</h2>
      <div class="profile-bottom__list_1">
        <!--ì¢‹ì•„ìš” ëˆ„ë¥¸ ëª¨ì§‘ê¸€-->
        {% for like_post in user.like_posts.all %}
        <div class="profile-bottom__post">
        <a class="profile-bottom__item" href="{% url 'posts:detail' like_post.id %}">
            {% if like_post.activation == True %}
            <span class="activation_ing">ëª¨ì§‘ì¤‘</span>
            {% else %}
            <span class="activation_over">ëª¨ì§‘ì™„ë£Œ</span>
            {% endif %}
            <p>{{like_post.title}}</p>
            <div class="profile-bottom__post__content">
              <p>
                {{like_post.content|truncatechars:50|safe}}
              </p></div>
            <div class="profile-bottom__post__icon">
              <span><i class="fa-solid fa-eye"></i></i><span>{{like_post.views}}</span></span>
              <span><i class="fa-regular fa-heart fa-lg"></i><span>{{like_post.likes}}</span></span>
              <span><i class="fa-solid fa-comment-dots"></i>{{like_post.comment_set.count}}</span>
            </div>
          </a>
        </div>
        {% endfor %}
        <!--ì¢‹ì•„ìš” ëˆ„ë¥¸ í”Œë ˆì´ìŠ¤-->
        {% for place, image in pairs_like %}
        <div class="profile-bottom__place">
          <a class="profile-bottom__item" href="{% url 'place:detail' place.id %}" >
            {% if image %} <!--ê²Œì‹œë¬¼-->
            <div class="profile-bottom__place__img">
              <img src="{{image.image.url}}"><br>
            </div>
            {% endif %}
            <div class="profile-bottom__place__info">
              <p>{{place.name}}</p>
              <div class="profile-bottom__place__location"><i class="fa-solid fa-location-dot"></i><span>{{place.location}}</span></div>
              <div>{{place.rating}}</div>
            </div>
          </a>
        </div>
        {% endfor %}
    </div>
    </div>
    {% endif %}

    <!--ì‘ì„±í•œ ëª¨ê°ì½” ëª¨ì§‘ê¸€-->
    <div class="profile-bottom__list">
      <h2>ğŸ’» ì‘ì„±í•œ ëª¨ê°ì½” ëª¨ì§‘ê¸€</h2>
      <div class="profile-bottom__list_2">
        {% for post in user.post_set.all %}
        <div class="profile-bottom__post">
        <a class="profile-bottom__item" href="{% url 'posts:detail' post.id %}">
            {% if post.activation == True %}
            <span class="activation_ing">ëª¨ì§‘ì¤‘</span>
            {% else %}
            <span class="activation_over">ëª¨ì§‘ì™„ë£Œ</span>
            {% endif %}
            <p>{{post.title}}</p>
            <div class="profile-bottom__post__content">
              <p>
                {{post.content|truncatechars:50|safe}}
              </p></div>
            <div class="profile-bottom__post__icon">
              <span><i class="fa-solid fa-eye"></i></i><span>{{post.views}}</span></span>
              <span><i class="fa-regular fa-heart fa-lg"></i><span>{{post.likes}}</span></span>
              <span><i class="fa-solid fa-comment-dots"></i>{{post.comment_set.count}}</span>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>

    <!--ì‘ì„±í•œ ëª¨ê°ì½” í›„ê¸°-->
    <div class="profile-bottom__list">
      <h2>âœï¸ ì‘ì„±í•œ ëª¨ê°ì½” í›„ê¸°</h2>
      <div class="profile-bottom__list_3">
        {% for review in user.review_set.all %}
        <div class="profile-bottom__review">
        <a class="profile-bottom__item" href="{% url 'posts:detail' review.post.id %}">
          {% if review.user == review.post.user %}
          <span class="auth_host">ì£¼ìµœì</span>
          {% else %}
          <span class="auth_guest">ì°¸ì—¬ì</span>
          {% endif %}
          <p class="profile-bottom__review__title">{{review.post.title}}</p>
          <div class="profile-bottom__review__bottom">
            {% if review.image %}
            <img src="{{review.image.url}}" />
            {% else %}
            <p>no image</p>
            {% endif %}
            <p style="line-height: 1.5rem;">{{review.post.content|truncatechars:90|safe}}</p>
          </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>

    <!--ì‘ì„±í•œ í”Œë ˆì´ìŠ¤ í›„ê¸°-->
    <div class="profile-bottom__list">
      <h2>ğŸ“ í”Œë ˆì´ìŠ¤ í›„ê¸°</h2>
      <div class="profile-bottom__list_4">
        {% for place, image in pairs_my %}
        <div class="profile-bottom__place">
          <a class="profile-bottom__item" href="{% url 'place:detail' place.id %}" >
            {% if image %} <!--ê²Œì‹œë¬¼-->
            <div class="profile-bottom__place__img">
              <img src="{{image.image.url}}"><br>
            </div>
            {% endif %}
            <div class="profile-bottom__place__info">
              <p>{{place.name}}</p>
              <div class="profile-bottom__place__location"><i class="fa-solid fa-location-dot"></i><span>{{place.location}}</span></div>
              <div>{{place.rating}}</div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>

    <!--     
      <h2>ğŸ“ í”Œë ˆì´ìŠ¤ í›„ê¸°</h2>
      {% for place, image in pairs_my %}
      <div class="profile-bottom__place">
        <a class="content-box__itme" href="{% url 'place:detail' place.id %}" >
          {% if image %}
          <div class="content-box__img">
            <img src="{{image.image.url}}"><br>
          </div>
          {% endif %}
          <h2>{{place.name}}</h2>
          <div><i class="fa-solid fa-location-dot"></i><span>{{place.location}}</span></div>
          <div>{{place.rating}}</div>
        </a>
      </div>
      {% endfor %}
    </div> -->
  </div>
</div>
{% endblock %}